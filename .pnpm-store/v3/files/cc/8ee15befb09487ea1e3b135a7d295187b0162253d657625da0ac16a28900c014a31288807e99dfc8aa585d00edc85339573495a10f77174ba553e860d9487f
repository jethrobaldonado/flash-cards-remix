import { resolveOptions } from '../resolver.js';
export function EntryPlugin(ctx, pwaOptions) {
    return {
        name: 'vite-plugin-remix-pwa:entry',
        enforce: 'pre',
        async configResolved(config) {
            ctx.isDev = process.env.NODE_ENV === 'development';
            // @ts-ignore - Utilizing remix special config here
            ctx.isRemixDevServer = config.__remixPluginContext !== undefined;
            ctx.viteConfig = config;
            // @ts-ignore - Also utilizing remix special config here
            ctx.__remixPluginContext = config.__remixPluginContext ?? undefined;
            ctx.options = await resolveOptions(pwaOptions, config);
        },
    };
}
